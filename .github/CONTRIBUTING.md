# GitHub Flow開発手順書

このドキュメントは、Gitコマンドラインインターフェース（CLI）とGitHubのWebインターフェース（GUI）を併用した、GitHub Flowに基づく開発の進め方を解説するものである。

## 開発の大きな流れ

GitHub Flowは、`main`ブランチを常にデプロイ可能な状態に保ち、機能追加やバグ修正は「トピックブランチ」を作成して行う、シンプルかつ効率的なワークフローである。

1.  **Issueの作成**: 実施するタスクをGitHubのIssueで管理する。
2.  **ブランチの作成**: `main`ブランチから作業用のトピックブランチを作成する。
3.  **開発とコミット**: ローカル環境でコードの変更を行い、作業内容をコミットする。
4.  **プッシュ**: ローカルのブランチをGitHubのリモートリポジトリにプッシュする。
5.  **プルリクエストの作成**: `main`ブランチへの変更の取り込みを依頼するためのプルリクエストを作成し、レビューを依頼する。
6.  **レビューと修正**: レビューでの指摘に基づきコードを修正し、再度プッシュする。
7.  **マージ**: レビューで承認されたプルリクエストを`main`ブランチにマージする。
8.  **クリーンアップ**: 不要になったローカルとリモートのトピックブランチを削除する。

---

## 具体的な手順

### Step 1: Issueの作成 (GitHub GUI)

開発に着手する前に、作業内容をGitHub上でIssueとして登録する。

1.  対象プロジェクトのGitHubリポジトリページを開く。
2.  「**Issues**」タブをクリックし、「**New issue**」ボタンを押下する。
3.  タスクのタイトルと詳細な内容を記述し、必要に応じて担当者（Assignees）やラベル（Labels）を設定後、Issueを作成する。



### Step 2: トピックブランチの作成 (Gitコマンド)

Issueに対応するトピックブランチをローカルで作成する。

#### ブランチの命名規則

ブランチ名は、そのブランチの目的が明確にわかるように命名することが重要である。一般的な命名規則は以下の通りである。

-   **形式**: `{type}/{issue-number}-{description}`
-   **`{type}`**: ブランチの種類を示すプレフィックス
    -   `feature/`: 新機能の開発
    -   `fix/` or `bugfix/`: バグ修正
    -   `hotfix/`: 緊急性の高いバグ修正
    -   `refactor/`: リファクタリング
    -   `chore/`: ビルドプロセスやドキュメントの修正など
-   **`{issue-number}`**: 対応するIssue番号
-   **`{description}`**: ブランチの目的を簡潔に記述（例: `add-login-page`）

**命名例**: `feature/1-add-login-page`

#### ブランチ作成コマンド

1.  まず、ローカルの`main`ブランチを最新の状態に更新する。
    ```bash
    # mainブランチに切り替え
    git switch main

    # リモートの最新情報を取得
    git pull origin main
    ```
2.  次に、命名規則に従って新しいトピックブランチを作成し、そのブランチに切り替える。
    ```bash
    # ブランチを作成して切り替える
    git switch -c feature/1-add-login-page
    ```

### Step 3: 開発とコミット (Gitコマンド)

作成したブランチでコードの編集やファイルの追加・削除を行う。作業がある程度まとまった段階で、変更内容をコミットする。

1.  変更したファイルをステージングエリアに追加する。
    ```bash
    # すべての変更をステージング
    git add .
    ```
2.  ステージングした変更をコミットする。コミットメッセージには、**何を変更したか**を明確に記述し、関連するIssue番号（例: `#1`）を含めることが望ましい。
    ```bash
    git commit -m "feat: ログインページの骨格を追加 #1"
    ```

### Step 4: リモートリポジトリへのプッシュ (Gitコマンド)

ローカルでのコミットを、GitHub上のリモートリポジトリに反映させる。

```bash
# 現在のブランチをリモートにプッシュ
# -u オプションは初回のみ。次回からは `git push` だけで良い
git push -u origin feature/1-add-login-page
````

### Step 5: プルリクエストの作成 (GitHub GUI)

プッシュが完了したら、GitHub上でプルリクエストを作成し、チームメンバーにレビューを依頼する。

1.  GitHubのリポジトリページにアクセスし、「**Compare & pull request**」ボタンをクリックする。
2.  プルリクエストのタイトルと詳細な説明を記述する。どのような変更を行い、なぜこの変更が必要かを明確にする。
3.  右側のメニューから、レビュアー（Reviewers）や関連するIssue（Linked issues）を設定する。
4.  「**Create pull request**」ボタンをクリックして作成する。

### Step 6: レビューと修正

レビュアーはプルリクエスト上のコードを確認し、コメントや修正依頼を行う。開発者は指摘事項をローカルで修正し、再度コミットとプッシュを行う。プッシュすると、既存のプルリクエストは自動的に更新される。

### Step 7: プルリクエストのマージ (GitHub GUI)

プルリクエストが承認されたら、`main`ブランチにマージする。

1.  プルリクエストのページで、「**Merge pull request**」ボタンをクリックする。
2.  コミットメッセージを確認・編集し、「**Confirm merge**」をクリックする。
3.  マージ完了後、「**Delete branch**」ボタンをクリックし、リモートのトピックブランチを削除する。

### Step 8: ローカルブランチのクリーンアップ (Gitコマンド)

最後に、ローカル環境を整理する。

1.  `main`ブランチに切り替え、リモートの最新の状態を取り込む。
    ```bash
    git switch main
    git pull origin main
    ```
2.  不要になったローカルのトピックブランチを削除する。
    ```bash
    git branch -d feature/1-add-login-page
    ```

これで一連の開発サイクルは完了である。

-----

## トラブルシューティング

### コンフリクト（競合）が発生した場合

他の開発者が同じファイルの同じ箇所を編集し、先に`main`ブランチにマージした場合にコンフリクトが発生する。

#### 解決手順

1.  **`main`ブランチの最新の状態を取得**:

    ```bash
    # mainブランチに切り替え
    git switch main
    git pull origin main

    # 作業ブランチに戻る
    git switch feature/1-add-login-page
    ```

2.  **作業ブランチに`main`ブランチの内容を取り込む**:
    `rebase`を使う方法が推奨される。コミット履歴が直線的になり、綺麗に保たれる。

    ```bash
    git rebase main
    ```

    （`merge`を使う場合: `git merge main`）

3.  **コンフリクトの解決**:
    `git rebase main` を実行すると、コンフリクトが発生したファイルで処理が停止する。

      - エディタでコンフリクトが発生したファイルを開く。
      - `<<<<<<<`、`=======`、`>>>>>>>` で示された箇所を、正しいコードになるように手動で修正する。
      - 修正が完了したら、ファイルを保存する。

4.  **解決したファイルをステージング**:

    ```bash
    git add <conflict-file-path>
    ```

5.  **`rebase`の継続**:

    ```bash
    git rebase --continue
    ```

    （他にコンフリクトがなければ `rebase` が完了する。あればStep 3に戻る）

6.  **強制プッシュ (`--force-with-lease`)**:
    `rebase` を行うとコミット履歴が書き換わるため、通常の `git push` は拒否される。`--force-with-lease` を使って安全に強制プッシュを行う。

    ```bash
    # 安全な強制プッシュ
    git push --force-with-lease
    ```

### その他

  - **誤ってコミットしてしまった場合**:

      - プッシュ前: `git reset HEAD~` や `git commit --amend` で修正する。
      - プッシュ後: `git revert` で打ち消しコミットを作成する。

  - **ブランチを間違えて作業してしまった場合**:
    `git stash` で変更を一時退避し、正しいブランチに切り替えてから `git stash pop` で変更を復元する。

<!-- end list -->